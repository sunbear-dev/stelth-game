[gd_scene load_steps=6 format=3 uid="uid://bergfco0n2o15"]

[ext_resource type="PackedScene" uid="uid://bs4gdxwwfax5x" path="res://src/scenes/base_level.tscn" id="1_ug6ds"]
[ext_resource type="PackedScene" uid="uid://bqu6r7oq6xopi" path="res://src/scenes/guard.tscn" id="2_kjswt"]
[ext_resource type="PackedScene" uid="uid://431m1eprlkyx" path="res://src/scenes/player.tscn" id="3_qdghd"]
[ext_resource type="PackedScene" uid="uid://d28eeyyrvhutp" path="res://src/scenes/button.tscn" id="4_hrk3d"]
[ext_resource type="PackedScene" uid="uid://bn8f3jmblyvjf" path="res://src/scenes/door.tscn" id="5_6jawj"]

[node name="Level" instance=ExtResource("1_ug6ds")]

[node name="TileMap" parent="." index="0"]
visibility_layer = 15
layer_0/tile_data = PackedInt32Array(-262150, 0, 2, -262149, 0, 2, -262148, 0, 3, -262147, 131072, 1, -262146, 131072, 805306370, -262145, 0, 3, -327680, 0, 2, -327679, 0, 2, -327678, 0, 3, -327677, 262144, 2, -327676, 262144, 2, -327675, 0, 3, -327674, 0, 2, -327673, 0, 2, -327686, 65536, 1, -327685, 65536, 1, -327684, 65536, 1, -327683, 131072, 1, -327682, 131072, 805306370, -327681, 65536, 1, -393216, 65536, 1, -393215, 65536, 1, -393214, 65536, 1, -393213, 65536, 1, -393212, 65536, 1, -393211, 65536, 1, -393210, 65536, 1, -393209, 65536, 1, -262151, 131072, 1610612739, -327687, 131072, 805306369, -393223, 196608, 1610612736, -393222, 65536, 0, -393221, 65536, 0, -393220, 65536, 0, -393219, 196608, 0, -393218, 196608, 1610612736, -393217, 65536, 0, -458752, 65536, 0, -458751, 65536, 0, -458750, 65536, 0, -458749, 65536, 0, -458748, 65536, 0, -458747, 65536, 0, -458746, 65536, 0, -458745, 65536, 0, -458744, 196608, 0, -393208, 131072, 1, -327672, 131072, 1, -196614, 0, 3, -131078, 0, 3, -65542, 262144, 805306371, -6, 0, 3, 65530, 0, 3, -196613, 0, 3, -131077, 0, 3, -65541, 0, 3, -5, 0, 3, 65531, 0, 3, -196612, 262144, 1342177283, -131076, 262144, 1610612739, -65540, 0, 3, -4, 0, 3, 65532, 0, 3, -196611, 131072, 1, -131075, 65536, 1342177283, -65539, 0, 3, -3, 65536, 805306371, 65533, 131072, 1, -196610, 131072, 805306370, -131074, 65536, 3, -65538, 0, 3, -2, 65536, 805306368, 65534, 196608, 2, -196609, 0, 3, -131073, 0, 3, -65537, 0, 3, -1, 65536, 1610612739, 65535, 131072, 805306369, -262144, 0, 3, -196608, 0, 3, -131072, 0, 3, -65536, 0, 3, 0, 0, 3, -262143, 131072, 1342177283, -196607, 131072, 1, -131071, 131072, 3, -65535, 0, 3, 1, 0, 3, -262142, 131072, 805306371, -196606, 131072, 805306369, -131070, 131072, 1610612739, -65534, 0, 3, 2, 0, 3, -262141, 0, 3, -196605, 0, 3, -131069, 0, 3, -65533, 0, 3, 3, 0, 3, -262140, 0, 3, -196604, 65536, 5, -131068, 0, 3, -65532, 0, 3, 4, 0, 3, -262139, 0, 3, -196603, 0, 3, -131067, 0, 3, -65531, 0, 3, 5, 0, 3, -262138, 0, 3, -196602, 0, 3, -131066, 0, 3, -65530, 0, 3, 6, 0, 3, -262137, 0, 3, -196601, 0, 3, -131065, 0, 3, -65529, 0, 3, 7, 0, 3, -196615, 262144, 4, -131079, 131072, 805306371, -65543, 131072, 805306369, -7, 131072, 805306369, 65529, 131072, 805306369, 131065, 131072, 805306369, 196601, 131072, 805306369, 262137, 196608, 805306368, 131069, 65536, 1342177283, 196605, 0, 3, 262141, 65536, 805306368, 262138, 65536, 805306368, 262139, 65536, 805306368, 262140, 65536, 805306368, 262142, 65536, 805306368, 262143, 65536, 805306368, 196608, 65536, 805306368, 196609, 65536, 805306368, 196610, 196608, 1342177280, 131074, 131072, 1342177280, 65538, 131072, 1342177283, 131066, 0, 3, 131067, 262144, 1342177283, 131068, 0, 3, 131070, 196608, 3, 131071, 65536, 3, 65536, 0, 3, 65537, 0, 3, 196602, 65536, 2, 196603, 262144, 1610612739, 196604, 0, 3, 196606, 0, 3, 196607, 0, 3, 131072, 0, 3, 131073, 0, 3, -262136, 131072, 1, -196600, 131072, 1, -131064, 131072, 1, -65528, 131072, 1, 8, 131072, 1, 65539, 131072, 1342177281, 65540, 131072, 805306371, 65541, 0, 3, 65542, 131072, 1342177283, 65543, 131072, 1342177281, 65544, 196608, 1342177280, -196616, 0, 3, -196617, 0, 3, -131081, 0, 3, -65545, 0, 3, -9, 0, 3, 65527, 0, 3, 131063, 0, 3, 196599, 0, 3, 262135, 0, 3, 327671, 0, 3, 393207, 0, 3, 393208, 0, 3, 393209, 0, 3, 393210, 0, 3, 393211, 0, 3, 393212, 0, 3, 393213, 0, 3, 393214, 0, 3, 393215, 0, 3, 327680, 0, 3, 327681, 0, 3, 327682, 0, 3, 327683, 0, 3, 327684, 0, 3, 262148, 0, 3, 131077, 0, 3, 196613, 0, 3, 262149, 0, 3, -262152, 131072, 1610612737, -262153, 131072, 1610612737, -262154, 196608, 1610612736, -65544, 131072, 1, -8, 131072, 1, 65528, 131072, 1, 131064, 131072, 1, 196600, 131072, 1, 262136, 131072, 1, 327672, 131072, 3, 327673, 131072, 1610612737, 327674, 131072, 1610612737, 327675, 131072, 1610612737, 327676, 131072, 1610612737, 327677, 131072, 1610612737, 327678, 131072, 1610612737, 327679, 131072, 1610612737, 262144, 131072, 1610612737, 262145, 131072, 1610612737, 262146, 131072, 1610612737, 262147, 131072, 1610612739, -196618, 131072, 805306369, -131082, 131072, 805306369, -65546, 131072, 805306369, -10, 131072, 805306369, 65526, 131072, 805306369, 131062, 131072, 805306369, 196598, 131072, 805306369, 262134, 131072, 805306369, 327670, 131072, 805306369, 393206, 131072, 805306369, 458742, 196608, 805306368, 458743, 131072, 1342177281, 458744, 131072, 1342177281, 458745, 131072, 1342177281, 458746, 131072, 1342177281, 458747, 131072, 1342177281, 458748, 131072, 1342177281, 458749, 131072, 1342177281, 458750, 131072, 1342177281, 458751, 131072, 1342177281, 393216, 131072, 1342177281, 393217, 131072, 1342177281, 393218, 131072, 1342177281, 393219, 131072, 1342177281, 393220, 131072, 1342177281, 393221, 196608, 1342177280, 393222, 196608, 2, 327686, 196608, 1342177280, 262150, 131072, 1, 196614, 131072, 1, 131078, 131072, 1, 131076, 131072, 805306369, 196612, 131072, 1610612739, 327685, 131072, 1342177283, -131080, 131072, 1342177283, 196611, 196608, 1610612736, 131075, 196608, 2, -393226, 196608, 2, -327690, 196608, 2, -327689, 196608, 2, -393225, 196608, 2, -393224, 196608, 2, -327688, 196608, 2)
layer_1/z_index = 3

[node name="Door" parent="TileMap" index="0" instance=ExtResource("5_6jawj")]
position = Vector2(-104, -56)

[node name="Button" parent="TileMap" index="1" instance=ExtResource("4_hrk3d")]
visibility_layer = 2
position = Vector2(-88, 40)

[node name="Button2" parent="TileMap" index="2" instance=ExtResource("4_hrk3d")]
visibility_layer = 2
position = Vector2(-56, -72)

[node name="TurnManager" parent="TileMap" index="3" node_paths=PackedStringArray("player")]
player = NodePath("Player")

[node name="Guard3" parent="TileMap/TurnManager/Enemies" index="0" node_paths=PackedStringArray("tile_map") instance=ExtResource("2_kjswt")]
position = Vector2(86, -40)
tile_map = NodePath("../../..")

[node name="Guard2" parent="TileMap/TurnManager/Enemies" index="1" node_paths=PackedStringArray("tile_map") instance=ExtResource("2_kjswt")]
position = Vector2(22, -7)
tile_map = NodePath("../../..")

[node name="Guard" parent="TileMap/TurnManager/Enemies" index="2" node_paths=PackedStringArray("tile_map") instance=ExtResource("2_kjswt")]
position = Vector2(-55, -23)
tile_map = NodePath("../../..")

[node name="Guard4" parent="TileMap/TurnManager/Enemies" index="3" node_paths=PackedStringArray("tile_map") instance=ExtResource("2_kjswt")]
position = Vector2(-42, 40)
tile_map = NodePath("../../..")

[node name="Player" parent="TileMap/TurnManager" index="1" node_paths=PackedStringArray("tile_map") instance=ExtResource("3_qdghd")]
position = Vector2(-88, -74)
tile_map = NodePath("../..")

[connection signal="door_opened" from="TileMap/Door" to="TileMap" method="_on_door_door_opened"]
[connection signal="button_pressed" from="TileMap/Button" to="TileMap/Door" method="_on_button_pressed"]
[connection signal="button_pressed" from="TileMap/Button2" to="TileMap/Door" method="_on_button_pressed"]
[connection signal="player_spotted" from="TileMap/TurnManager/Enemies/Guard3" to="." method="_on_guard_player_spotted"]
[connection signal="player_spotted" from="TileMap/TurnManager/Enemies/Guard2" to="." method="_on_guard_player_spotted"]
[connection signal="player_spotted" from="TileMap/TurnManager/Enemies/Guard" to="." method="_on_guard_player_spotted"]
[connection signal="player_spotted" from="TileMap/TurnManager/Enemies/Guard4" to="." method="_on_guard_player_spotted"]
[connection signal="win" from="TileMap/TurnManager/Player" to="." method="_on_player_win"]

[editable path="TileMap/TurnManager"]
